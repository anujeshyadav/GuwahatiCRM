{"version":3,"sources":["views/apps/freshlist/order/PlaceOrder.js"],"names":["i","GrandTotal","SelectedITems","SelectedSize","PlaceOrder","args","useState","setIndex","error","ProductList","setProductList","UnitList","setUnitList","PartyList","setPartyList","PartyId","setPartyId","grandTotalAmt","setGrandTotalAmt","UserInfo","setUserInfo","dateofDelivery","setDateofDelivery","productId","availableQty","qty","price","totalprice","unitQty","Size","unitType","product","setProduct","history","useHistory","handleProductChangeProduct","e","index","availableSize","target","value","name","list","amt","length","map","val","console","log","reduce","a","b","handleRequredQty","avalaibleSize","Number","handleSelection","selectedList","selectedItem","userdata","JSON","parse","localStorage","getItem","push","warehouse","_id","database","URl","WareHouse_Current_Stock","_Get","then","res","currentStock","Stock","catch","err","swal","prevProductList","updatedProductList","updatedProduct","Product_MRP","useEffect","ProductListView","Product","CreateCustomerList","Customer","UnitListView","Unit","userInfo","addMoreProduct","removeMoreProduct","newFormValues","splice","onRemove1","removedItem","className","color","onClick","onSubmit","preventDefault","fullname","firstName","lastName","ObjOrder","userId","fullName","address","Address","grandTotal","MobileNo","mobileNumber","country","Country","state","State","city","City","orderItems","DateofDelivery","partyId","SavePlaceOrder","lg","md","sm","required","selectionLimit","isObject","options","onSelect","handleSelectionParty","onRemove","displayValue","type","onChange","key","placeholder","autocomplete","updatedUnitList","primaryUnit","ele","indextotal","handleSelectionUnit","readOnly","Ripple"],"mappings":"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","file":"static/js/465.46106dfe.chunk.js","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport xmlJs from \"xml-js\";\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Col,\r\n  Form,\r\n  Row,\r\n  Input,\r\n  Label,\r\n  Button,\r\n  FormGroup,\r\n  CustomInput,\r\n  ModalBody,\r\n  ModalHeader,\r\n  Modal,\r\n  InputGroup,\r\n} from \"reactstrap\";\r\nimport \"react-phone-input-2/lib/style.css\";\r\nimport Multiselect from \"multiselect-react-dropdown\";\r\nimport \"../../../../assets/scss/pages/users.scss\";\r\nimport {\r\n  SavePlaceOrder,\r\n  ProductListView,\r\n  CreatePartyList,\r\n  UnitListView,\r\n  CreateCustomerList,\r\n  _Get,\r\n} from \"../../../../ApiEndPoint/ApiCalling\";\r\nimport \"../../../../assets/scss/pages/users.scss\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { WareHouse_Current_Stock } from \"../../../../ApiEndPoint/Api\";\r\nimport swal from \"sweetalert\";\r\n\r\nlet GrandTotal = [];\r\nlet SelectedITems = [];\r\nlet SelectedSize = [];\r\nconst PlaceOrder = (args) => {\r\n  const [Index, setIndex] = useState(\"\");\r\n  const [index, setindex] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [ProductList, setProductList] = useState([]);\r\n  const [UnitList, setUnitList] = useState([]);\r\n  const [PartyList, setPartyList] = useState([]);\r\n  const [PartyId, setPartyId] = useState(\"\");\r\n  const [grandTotalAmt, setGrandTotalAmt] = useState(0);\r\n  const [priceTotal, setPriceTotal] = useState(0);\r\n  const [UserInfo, setUserInfo] = useState({});\r\n  const [dateofDelivery, setDateofDelivery] = useState(\"\");\r\n\r\n  const [product, setProduct] = useState([\r\n    {\r\n      productId: \"\",\r\n      availableQty: \"\",\r\n      qty: 1,\r\n      price: \"\",\r\n      totalprice: \"\",\r\n      unitQty: \"\",\r\n      Size: \"\",\r\n      unitType: \"\",\r\n    },\r\n  ]);\r\n  let history = useHistory();\r\n\r\n  const handleProductChangeProduct = (e, index, availableSize) => {\r\n    if (availableSize >= e.target.value) {\r\n      setIndex(index);\r\n      const { name, value } = e.target;\r\n      const list = [...product];\r\n      list[index][name] = value;\r\n\r\n      let amt = 0;\r\n      if (list.length > 0) {\r\n        const x = list?.map((val) => {\r\n          console.log(val.qty * val.price);\r\n          list[index][\"totalprice\"] = val.qty * val.price;\r\n          return val.qty * val.price;\r\n        });\r\n        amt = x.reduce((a, b) => a + b);\r\n        console.log(\"GrandTotal\", amt);\r\n      }\r\n      // console.log(list);\r\n      setProduct(list);\r\n      setGrandTotalAmt(amt);\r\n      console.log(GrandTotal);\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleSelectionParty = (selectedList, selectedItem, index) => {\r\n    setPartyId(selectedItem?._id);\r\n  };\r\n\r\n  const handleRequredQty = (e, index, avalaibleSize) => {\r\n    const { name, value } = e.target;\r\n    if (Number(value) <= avalaibleSize) {\r\n      if (Number(value != 0)) {\r\n        setIndex(index);\r\n        const list = [...product];\r\n        list[index][name] = Number(value);\r\n\r\n        let amt = 0;\r\n        if (list.length > 0) {\r\n          const x = list?.map((val) => {\r\n            GrandTotal[index] = val.Size * val.qty * val.price;\r\n            list[index][\"totalprice\"] = val.Size * val.qty * val.price;\r\n            return val.Size * val.qty * val.price;\r\n          });\r\n          amt = x.reduce((a, b) => a + b);\r\n        }\r\n        setProduct(list);\r\n        setGrandTotalAmt(amt);\r\n      }\r\n    }\r\n  };\r\n  const handleSelectionUnit = (selectedList, selectedItem, index) => {\r\n    SelectedSize.push(selectedItem);\r\n    setProduct((prevProductList) => {\r\n      const updatedUnitList = [...prevProductList];\r\n      const updatedProduct = { ...updatedUnitList[index] }; // Create a copy of the product at the specified index\r\n      updatedProduct.Size = selectedItem.unitQty;\r\n      updatedProduct.unitType = selectedItem.primaryUnit;\r\n      updatedUnitList[index] = updatedProduct;\r\n      let myarr = prevProductList?.map((ele, i) => {\r\n        updatedUnitList[index][\"totalprice\"] =\r\n          ele?.qty * ele.price * SelectedSize[i]?.unitQty;\r\n        let indextotal = ele?.price * ele.qty * SelectedSize[i]?.unitQty;\r\n        GrandTotal[index] = indextotal;\r\n        return indextotal;\r\n      });\r\n      let amt = myarr.reduce((a, b) => a + b);\r\n      setGrandTotalAmt(amt);\r\n      return updatedUnitList; // Return the updated product list\r\n    });\r\n  };\r\n  const handleSelection = async (selectedList, selectedItem, index) => {\r\n    const userdata = JSON.parse(localStorage.getItem(\"userData\"));\r\n    SelectedITems.push(selectedItem);\r\n    console.log(selectedItem?.warehouse);\r\n    console.log(selectedItem?._id);\r\n    console.log(userdata?._id, userdata?.database);\r\n    let URl = `${WareHouse_Current_Stock}${selectedItem?.warehouse}/`;\r\n    var Stock;\r\n    await _Get(URl, selectedItem?._id)\r\n      .then((res) => {\r\n        console.log(res?.currentStock);\r\n        Stock = res?.currentStock;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        swal(\"something went Wrong\");\r\n      });\r\n    setProduct((prevProductList) => {\r\n      const updatedProductList = [...prevProductList];\r\n      const updatedProduct = { ...updatedProductList[index] }; // Create a copy of the product at the specified index\r\n      updatedProduct.price = selectedItem.Product_MRP; // Update the price of the copied product\r\n      updatedProduct.productId = selectedItem._id;\r\n      updatedProduct.availableQty = Stock?.currentStock;\r\n      updatedProductList[index] = updatedProduct; // Replace the product at the specified index with the updated one\r\n      return updatedProductList; // Return the updated product list to set the state\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    // console.log(product);\r\n    // console.log(GrandTotal);\r\n  }, [product, GrandTotal]);\r\n\r\n  useEffect(() => {\r\n    const userId = JSON.parse(localStorage.getItem(\"userData\"))._id;\r\n\r\n    let userdata = JSON.parse(localStorage.getItem(\"userData\"));\r\n\r\n    ProductListView(userdata?._id, userdata?.database)\r\n      .then((res) => {\r\n        console.log(res.Product);\r\n        setProductList(res?.Product);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    CreateCustomerList(userdata?._id, userdata?.database)\r\n      .then((res) => {\r\n        let value = res?.Customer;\r\n        if (value?.length) {\r\n          setPartyList(value);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    UnitListView(userdata?._id, userdata?.database)\r\n      .then((res) => {\r\n        setUnitList(res.Unit);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n  useEffect(() => {\r\n    const userInfo = JSON.parse(localStorage.getItem(\"userData\"));\r\n    // console.log(userInfo);\r\n    setUserInfo(userInfo);\r\n  }, []);\r\n\r\n  let addMoreProduct = () => {\r\n    setProduct([\r\n      ...product,\r\n      {\r\n        product: \"\",\r\n        productId: \"\",\r\n        availableQty: \"\",\r\n        qty: 1,\r\n        price: \"\",\r\n        totalprice: \"\",\r\n      },\r\n    ]);\r\n  };\r\n  let removeMoreProduct = (i) => {\r\n    let newFormValues = [...product];\r\n    newFormValues?.splice(i, 1);\r\n    GrandTotal.splice(i, 1);\r\n    let amt = GrandTotal?.reduce((a, b) => a + b);\r\n    setGrandTotalAmt(amt);\r\n    setProduct(newFormValues);\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Final \", product);\r\n    let fullname = UserInfo.firstName + \" \" + UserInfo?.lastName;\r\n    const ObjOrder = {\r\n      userId: UserInfo?._id,\r\n      fullName: fullname,\r\n      address: UserInfo?.Address,\r\n      grandTotal: grandTotalAmt + grandTotalAmt * 0.05 + grandTotalAmt * 0.18,\r\n      MobileNo: UserInfo?.mobileNumber,\r\n      country: UserInfo?.Country,\r\n      state: UserInfo?.State,\r\n      city: UserInfo?.City,\r\n      orderItems: product,\r\n      DateofDelivery: dateofDelivery,\r\n      partyId: PartyId,\r\n    };\r\n    if (error) {\r\n      swal(\"Error occured while Entering Details\");\r\n    } else {\r\n      SavePlaceOrder(ObjOrder)\r\n        .then((res) => {\r\n          swal(\"Order Place Successfully\");\r\n          history.push(\"/app/AjGroup/order/placeOrderList\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  const onRemove1 = (selectedList, removedItem, index) => {\r\n    console.log(selectedList);\r\n  };\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Card>\r\n          <Row className=\"m-2\">\r\n            <Col className=\"\">\r\n              <div>\r\n                <h1 className=\"\">Place Order</h1>\r\n              </div>\r\n            </Col>\r\n            <Col className=\"\">\r\n              <div className=\"d-flex justify-content-end\">\r\n                <Button\r\n                  className=\"btn float-right\"\r\n                  color=\"warning\"\r\n                  onClick={() =>\r\n                    history.push(\"/app/AjGroup/order/placeOrderList\")\r\n                  }>\r\n                  Back\r\n                </Button>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n\r\n          <CardBody>\r\n            <Form className=\"m-1\" onSubmit={submitHandler}>\r\n              <Row>\r\n                <Col className=\"mb-1\" lg=\"4\" md=\"4\" sm=\"12\">\r\n                  <div className=\"\">\r\n                    <Label>Choose Party</Label>\r\n                    <Multiselect\r\n                      required\r\n                      selectionLimit={1}\r\n                      isObject=\"false\"\r\n                      options={PartyList}\r\n                      onSelect={(selectedList, selectedItem) =>\r\n                        handleSelectionParty(selectedList, selectedItem, index)\r\n                      }\r\n                      onRemove={onRemove1} // Function will trigger on remove event\r\n                      displayValue=\"OwnerName\" // Property name to display in the dropdown options\r\n                      // displayValue=\"firstName\" // Property name to display in the dropdown options\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col className=\"mb-1\" lg=\"4\" md=\"4\" sm=\"12\">\r\n                  <div className=\"\">\r\n                    <Label>Expected Delivery Date</Label>\r\n                    <Input\r\n                      required\r\n                      type=\"date\"\r\n                      name=\"DateofDelivery\"\r\n                      value={dateofDelivery}\r\n                      onChange={(e) => setDateofDelivery(e.target.value)}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n              {product &&\r\n                product?.map((product, index) => (\r\n                  <Row className=\"\" key={index}>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>ProductName</Label>\r\n                        <Multiselect\r\n                          required\r\n                          selectionLimit={1}\r\n                          isObject=\"false\"\r\n                          options={ProductList}\r\n                          onSelect={(selectedList, selectedItem) =>\r\n                            handleSelection(selectedList, selectedItem, index)\r\n                          }\r\n                          onRemove={(selectedList, selectedItem) => {\r\n                            onRemove1(selectedList, selectedItem, index);\r\n                          }}\r\n                          displayValue=\"Product_Title\" // Property name to display in the dropdown options\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>Available Size</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          name=\"availableQty\"\r\n                          placeholder=\"availableQty\"\r\n                          value={product?.availableQty}\r\n                          onChange={(e) => handleProductChangeProduct(e, index)}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>Required Qty</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          name=\"qty\"\r\n                          placeholder=\"Req_Qty\"\r\n                          autocomplete=\"off\"\r\n                          value={product?.qty}\r\n                          onChange={(e) =>\r\n                            handleRequredQty(e, index, product?.availableQty)\r\n                          }\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>Choose Unit</Label>\r\n                        <Multiselect\r\n                          required\r\n                          selectionLimit={1}\r\n                          isObject=\"false\"\r\n                          options={UnitList}\r\n                          onSelect={(selectedList, selectedItem) =>\r\n                            handleSelectionUnit(\r\n                              selectedList,\r\n                              selectedItem,\r\n                              index\r\n                            )\r\n                          }\r\n                          onRemove={(selectedList, selectedItem) => {\r\n                            onRemove1(selectedList, selectedItem, index);\r\n                          }}\r\n                          displayValue=\"primaryUnit\"\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>Price</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          name=\"price\"\r\n                          readOnly\r\n                          placeholder=\"Price\"\r\n                          value={product.price}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n                    <Col className=\"mb-1\">\r\n                      <div className=\"\">\r\n                        <Label>Total Price</Label>\r\n                        <Input\r\n                          type=\"number\"\r\n                          name=\"totalprice\"\r\n                          readOnly\r\n                          placeholder=\"TtlPrice\"\r\n                          value={product.Size * product.price * product.qty}\r\n                        />\r\n                      </div>\r\n                    </Col>\r\n\r\n                    <Col className=\"d-flex mt-1 abb\">\r\n                      <div className=\"btnStyle\">\r\n                        {index ? (\r\n                          <Button\r\n                            type=\"button\"\r\n                            color=\"danger\"\r\n                            className=\"button remove \"\r\n                            onClick={() => removeMoreProduct(index)}>\r\n                            -\r\n                          </Button>\r\n                        ) : null}\r\n                      </div>\r\n\r\n                      <div className=\"btnStyle\">\r\n                        <Button\r\n                          className=\"ml-1 mb-1\"\r\n                          color=\"primary\"\r\n                          type=\"button\"\r\n                          onClick={() => addMoreProduct()}>\r\n                          +\r\n                        </Button>\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                ))}\r\n              <Row>\r\n                <Col className=\"mb-1\" lg=\"12\" md=\"12\" sm=\"12\">\r\n                  <div className=\" d-flex justify-content-end\">\r\n                    <ul className=\"subtotal\">\r\n                      <li>\r\n                        <Label className=\"\">\r\n                          SubTotal : <strong>{grandTotalAmt}</strong>\r\n                        </Label>\r\n                      </li>\r\n                      <li>\r\n                        <Label className=\"\">\r\n                          Shipping Cost :{\" \"}\r\n                          <strong>RS {grandTotalAmt * 0.05}</strong>\r\n                        </Label>\r\n                      </li>\r\n                      <li>\r\n                        <Label className=\"\">\r\n                          Tax: <strong>RS {grandTotalAmt * 0.18}</strong>\r\n                        </Label>\r\n                      </li>\r\n\r\n                      <li>\r\n                        {\" \"}\r\n                        <Label className=\"pr-5\">\r\n                          Grand Total :{\" \"}\r\n                          <strong>\r\n                            {grandTotalAmt +\r\n                              grandTotalAmt * 0.05 +\r\n                              grandTotalAmt * 0.18}\r\n                          </strong>\r\n                        </Label>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <div className=\"d-flex justify-content-center\">\r\n                    <Button.Ripple\r\n                      color=\"primary\"\r\n                      type=\"submit\"\r\n                      className=\"mt-2\">\r\n                      Submit\r\n                    </Button.Ripple>\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </Form>\r\n          </CardBody>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PlaceOrder;\r\n"],"sourceRoot":""}