(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[474],{2939:function(e,t,a){"use strict";a.r(t);var l=a(24),n=a(60),o=a(9),i=a(26),c=a(1),r=a.n(c),u=(a(233),a(910)),d=a(914),m=a(902),s=a(903),v=a(244),p=a(904),E=a(905),b=a(906),g=a(892),f=a(921),y=a(900),h=a(901),N=a(908),O=a(85),j=a(136),S=a.n(j),P=(a(232),a(54)),T=a(6),_=a(72),x=a.n(_),C=[],q=[];t.default=function(e){var t,a=Object(c.useState)({}),j=Object(i.a)(a,2),_=(j[0],j[1],Object(c.useState)({Other_Expenses:100,GSTApplied:18,Other_charges:50,discount:10})),Q=Object(i.a)(_,2),R=Q[0],A=Q[1],I=Object(c.useState)(""),k=Object(i.a)(I,2),G=(k[0],k[1]),D=Object(c.useState)(""),M=Object(i.a)(D,2),U=M[0],F=(M[1],Object(c.useState)(!1)),V=Object(i.a)(F,2),L=V[0],W=V[1],w=Object(c.useState)([]),J=Object(i.a)(w,2),B=J[0],H=J[1],K=Object(c.useState)([]),z=Object(i.a)(K,2),X=(z[0],z[1],Object(c.useState)({})),Y=Object(i.a)(X,2),Z=Y[0],$=(Y[1],Object(c.useState)([])),ee=Object(i.a)($,2),te=(ee[0],ee[1],Object(c.useState)(0)),ae=Object(i.a)(te,2),le=ae[0],ne=ae[1],oe=Object(c.useState)({}),ie=Object(i.a)(oe,2),ce=(ie[0],ie[1]),re=Object(c.useState)({}),ue=Object(i.a)(re,2),de=ue[0],me=ue[1],se=Object(c.useState)(!1),ve=Object(i.a)(se,2),pe=ve[0],Ee=ve[1],be=function(){return Ee(!pe)},ge=Object(O.i)().id,fe=function(e){var t=e.target,a=t.name,l=t.value;A(Object(o.a)(Object(o.a)({},R),{},Object(n.a)({},a,l)))},ye=Object(c.useState)([{product:"",productId:"",selecetedUnit:"",AvailaleQty:null,availableQty:"",transferQty:1,RequiredQty:"",price:"",totalprice:"",Size:"",unitType:"",stockTrxDate:"",targetEndDate:"",discount:"",Shipping:"",tax:"",grandTotal:""}]),he=Object(i.a)(ye,2),Ne=he[0],Oe=he[1],je=function(e,t){G(t);var a=e.target,n=a.name,o=a.value,i=Object(l.a)(Ne);i[t][n]=o,Oe(i)},Se=function(e,t){G(t);var a=e.target,n=a.name,o=a.value,i=Object(l.a)(Ne);i[t][n]=Number(o);var c=0;i.length>0&&(c=(null===i||void 0===i?void 0:i.map((function(e){return C[t]=e.price*e.RequiredQty,i[t].totalprice=e.price*e.RequiredQty,(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.RequiredQty)}))).reduce((function(e,t){return e+t})),console.log("GrandTotal",c));Oe(i),ne(c.toFixed(2))},Pe=function(e,t,a){q.splice(a,1);var l=(null===Ne||void 0===Ne?void 0:Ne.map((function(e,l){var n,o;console.log((null===e||void 0===e?void 0:e.qty)*(null===(n=t[l])||void 0===n?void 0:n.Product_MRP));var i=(null===e||void 0===e?void 0:e.qty)*(null===(o=q[l])||void 0===o?void 0:o.Product_MRP);return C[a]=i,i}))).reduce((function(e,t){return e+t}));ne(l)};Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData")),t=T.Ld;W(!0),Object(P.id)(t,ge).then((function(t){var a,l,n,o;Object(P.Rb)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){var a,l,n,o,i,c;console.log(null===e||void 0===e?void 0:e.Product),H(null===e||void 0===e?void 0:e.Product);var r,u,d=null===t||void 0===t||null===(a=t.Production)||void 0===a||null===(l=a.product_name)||void 0===l?void 0:l._id,m=null===e||void 0===e||null===(n=e.Product)||void 0===n?void 0:n.filter((function(e){return(null===e||void 0===e?void 0:e._id)==d})),s=null===(o=t.Production)||void 0===o||null===(i=o.productItems)||void 0===i?void 0:i.map((function(e,t){var a,l;return{productId:null===e||void 0===e||null===(a=e.productId)||void 0===a?void 0:a._id,selecetedUnit:null===e||void 0===e?void 0:e.unitType,AvailaleQty:null,RequiredQty:null===e||void 0===e?void 0:e.qty,price:null===e||void 0===e?void 0:e.price,unitType:null===e||void 0===e?void 0:e.unitType,discount:null===e||void 0===e||null===(l=e.productId)||void 0===l?void 0:l.discount}})),v=0;(null===(c=t.Production)||void 0===c?void 0:c.productItems.length)>0&&(v=(null===(r=t.Production)||void 0===r||null===(u=r.productItems)||void 0===u?void 0:u.map((function(e){return C[U]=e.price*e.qty,(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.qty)}))).reduce((function(e,t){return e+t})),console.log("GrandTotal",v));ne(v.toFixed(2)),Oe(s),me(m),W(!1)})).catch((function(e){console.log(e)})),A({Other_Expenses:null===t||void 0===t||null===(a=t.Production)||void 0===a?void 0:a.miscellaneousExpennses,GSTApplied:null===t||void 0===t||null===(l=t.Production)||void 0===l?void 0:l.gstApplied,Other_charges:null===t||void 0===t||null===(n=t.Production)||void 0===n?void 0:n.otherCharges,discount:null===t||void 0===t||null===(o=t.Production)||void 0===o?void 0:o.discount})})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));ce(e)}),[]);var Te,_e=function(){Oe([].concat(Object(l.a)(Ne),[{product:"",productId:"",selecetedUnit:"",AvailaleQty:null,availableQty:"",transferQty:1,RequiredQty:"",price:"",totalprice:"",Size:"",unitType:"",stockTrxDate:"",targetEndDate:"",discount:"",Shipping:"",tax:"",grandTotal:""}]))},xe=function(e){var t=Object(l.a)(Ne);t.splice(e,1),C.splice(e,1);var a=C.reduce((function(e,t){return e+t}));ne(a),Oe(t)};return L?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:null===(Te=window)||void 0===Te?void 0:Te.innerHeight}},r.a.createElement("h3",null,"Loading..."))))):r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(m.a,{className:"m-2"},r.a.createElement(s.a,{lg:"8",md:"8",sm:"8",className:"mb-2 mt-1"},r.a.createElement("div",null,r.a.createElement("h1",{className:""},"Edit Production Process"))),r.a.createElement(s.a,null,r.a.createElement("div",{className:"float-right"},r.a.createElement(O.b,{render:function(e){var t=e.history;return r.a.createElement(v.a,{style:{cursor:"pointer"},className:"float-right mr-1",color:"primary",onClick:function(){return t.goBack()}}," ","Back")}})))),r.a.createElement(d.a,null,r.a.createElement(p.a,{className:"m-1",onSubmit:function(e){be(),e.preventDefault()}},r.a.createElement(m.a,null,r.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Choose Production Product "),r.a.createElement(S.a,{required:!0,disablePreSelectedValues:!0,selectionLimit:1,isObject:"false",selectedValues:de,displayValue:"Product_Title"})))),Ne&&(null===Ne||void 0===Ne?void 0:Ne.map((function(e,t){var a=null===B||void 0===B?void 0:B.filter((function(t){return(null===t||void 0===t?void 0:t._id)==(null===e||void 0===e?void 0:e.productId)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"",key:t},r.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Choose item *"),r.a.createElement(S.a,{required:!0,selectionLimit:1,isObject:"false",options:B,selectedValues:a,onSelect:function(e,a){return function(e,t,a){q.push(t),Oe((function(e){var n=Object(l.a)(e),i=Object(o.a)({},n[a]);return i.price=null===t||void 0===t?void 0:t.Product_MRP,i.productId=null===t||void 0===t?void 0:t._id,i.discount=null===t||void 0===t?void 0:t.discount,(null===t||void 0===t?void 0:t.unitType)&&(i.unitType=null===t||void 0===t?void 0:t.unitType.split(" ")[1]),n[a]=i,n}))}(0,a,t)},onRemove:function(e,a){Pe(0,a,t)},displayValue:"Product_Title"}))),r.a.createElement(s.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement("label",{for:"unit"},"Select Unit"),r.a.createElement("select",{required:!0,className:"form-control",name:"selecetedUnit",placeholder:"selecetedUnit",value:null===e||void 0===e?void 0:e.selecetedUnit,onChange:function(e){return je(e,t)},id:"unit"},r.a.createElement("option",{value:""},"--select Unit--"),r.a.createElement("option",{value:"kg"},"Kilogram (kg)"),r.a.createElement("option",{value:"Pcs"},"Pieces (Pcs)"),r.a.createElement("option",{value:"g"},"Gram (g)"),r.a.createElement("option",{value:"tonne"},"Metric Ton (tonne)"),r.a.createElement("option",{value:"m"},"Meter (m)"),r.a.createElement("option",{value:"cm"},"Centimeter (cm)"),r.a.createElement("option",{value:"mm"},"Millimeter (mm)"),r.a.createElement("option",{value:"in"},"Inch (in)"),r.a.createElement("option",{value:"ft"},"Foot (ft)"),r.a.createElement("option",{value:"m3"},"Cubic Meter (m\xb3)"),r.a.createElement("option",{value:"L"},"Liter (L)"),r.a.createElement("option",{value:"ml"},"Milliliter (ml)"),r.a.createElement("option",{value:"s"},"Second (s)"),r.a.createElement("option",{value:"min"},"Minute (min)"),r.a.createElement("option",{value:"hr"},"Hour (hr)"),r.a.createElement("option",{value:"\xb0C"},"Celsius (\xb0C)"),r.a.createElement("option",{value:"\xb0F"},"Fahrenheit (\xb0F)"),r.a.createElement("option",{value:"Pa"},"Pascal (Pa)"),r.a.createElement("option",{value:"bar"},"Bar (bar)"),r.a.createElement("option",{value:"m/s"},"Meters per Second (m/s)"),r.a.createElement("option",{value:"km/h"},"Kilometers per Hour (km/h)"),r.a.createElement("option",{value:"A"},"Ampere (A)"),r.a.createElement("option",{value:"V"},"Volt (V)"),r.a.createElement("option",{value:"W"},"Watt (W)"),r.a.createElement("option",{value:"kW"},"Kilowatt (kW)")))),r.a.createElement(s.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Price",(null===e||void 0===e?void 0:e.unitType)&&(null===e||void 0===e?void 0:e.unitType)),r.a.createElement(b.a,{type:"number",name:"price",readOnly:!0,"aria-readonly":!0,onChange:function(e){return Se(e,t)},placeholder:"Price",value:e.price}))),r.a.createElement(s.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Req_Qty"),r.a.createElement(b.a,{type:"number",min:0,step:"any",name:"RequiredQty",placeholder:"Req_Qty",value:null===e||void 0===e?void 0:e.RequiredQty,onChange:function(e){return Se(e,t)}}))),r.a.createElement(s.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Discount"),r.a.createElement(b.a,{type:"number",name:"discount",readOnly:!0,placeholder:"Discount",value:e.discount}))),r.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Total Price"),r.a.createElement(b.a,{type:"number",name:"totalprice",readOnly:!0,placeholder:"TtlPrice",value:(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.RequiredQty)}))),r.a.createElement(s.a,{className:"d-flex mt-1 abb",lg:"3",md:"3",sm:"12"},r.a.createElement("div",{className:"btnStyle"},t?r.a.createElement(v.a,{type:"button",color:"danger",className:"button remove ",onClick:function(){return xe(t)}},"- Remove"):null),r.a.createElement("div",{className:"btnStyle"},r.a.createElement(v.a,{className:"ml-1 mb-1",color:"primary",type:"button",onClick:function(){return _e()}},"+ Add")))))}))),r.a.createElement(m.a,null),r.a.createElement(m.a,null,r.a.createElement(s.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},r.a.createElement("div",{className:" d-flex justify-content-end"},r.a.createElement(E.a,{className:"pr-5"},"Grand Total :"," ",r.a.createElement("stron",null,le&&"NaN"==le?0:le," "))))),r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(v.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit"))))))),r.a.createElement(f.a,Object.assign({style:{maxWidth:"1050px"},isOpen:pe,toggle:be},e),r.a.createElement(y.a,{toggle:be},"Add Charges"),r.a.createElement(h.a,null,r.a.createElement(p.a,{className:"m-1",onSubmit:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("userData")),a=null===Ne||void 0===Ne?void 0:Ne.map((function(e,t){return{productId:null===e||void 0===e?void 0:e.productId,unit:null===e||void 0===e?void 0:e.unitType,price:null===e||void 0===e?void 0:e.price,qty:null===e||void 0===e?void 0:e.RequiredQty,unitType:null===e||void 0===e?void 0:e.selecetedUnit,totalPrice:(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.RequiredQty)}})),l=Number(le)+Number(null===R||void 0===R?void 0:R.Other_Expenses)+Number(null===R||void 0===R?void 0:R.Other_charges)+Number(le)*(null===R||void 0===R?void 0:R.GSTApplied)/100-Number(null===R||void 0===R?void 0:R.discount),n={created_by:null===t||void 0===t?void 0:t._id,product_name:null===Z||void 0===Z?void 0:Z._id,productItems:a,miscellaneousExpennses:null===R||void 0===R?void 0:R.Other_Expenses,gstApplied:null===R||void 0===R?void 0:R.GSTApplied,otherCharges:null===R||void 0===R?void 0:R.Other_charges,discount:null===R||void 0===R?void 0:R.discount,grandTotal:l};Object(P.kd)(T.Uc,n).then((function(e){console.log(e),x()("Production Process is Created")})).catch((function(e){console.log(e)}))}},r.a.createElement(m.a,null,r.a.createElement(s.a,{className:"mb-1",lg:"3",md:"3",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Miscellaneous Expenses "),r.a.createElement("input",{className:"form-control",name:"Other_Expenses",value:null===R||void 0===R?void 0:R.Other_Expenses,onChange:fe,type:"number"}))),r.a.createElement(s.a,{className:"mb-1",lg:"3",md:"3",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"GST Applied "),r.a.createElement(g.a,{className:"form-control",name:"GSTApplied",value:null===R||void 0===R?void 0:R.GSTApplied,onChange:fe,type:"select"},r.a.createElement("option",null,"--select--"),r.a.createElement("option",{value:18},"18"),r.a.createElement("option",{value:9},"9")))),r.a.createElement(s.a,{className:"mb-1",lg:"3",md:"3",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Other Charges "),r.a.createElement("input",{className:"form-control",name:"Other_charges",value:null===R||void 0===R?void 0:R.Other_charges,onChange:fe,type:"number"}))),r.a.createElement(s.a,{className:"mb-1",lg:"3",md:"3",sm:"12"},r.a.createElement("div",{className:""},r.a.createElement(E.a,null,"Discount "),r.a.createElement("input",{className:"form-control",value:null===R||void 0===R?void 0:R.discount,name:"discount",onChange:fe,type:"number"})))),r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," SubTotal:")," ",le&&"NaN"==le?0:le," "),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," Miscellaneous:"),null===R||void 0===R?void 0:R.Other_Expenses),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," GST:")," ",(null===R||void 0===R?void 0:R.GSTApplied)*le/100),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," other:"),null===R||void 0===R?void 0:R.Other_charges),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," Discount: "),null===R||void 0===R?void 0:R.discount),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("strong",null," GrandTotal:"),null===(t=Number(le)+Number(null===R||void 0===R?void 0:R.Other_Expenses)+Number(null===R||void 0===R?void 0:R.Other_charges)+Number(le)*(null===R||void 0===R?void 0:R.GSTApplied)/100-Number(null===R||void 0===R?void 0:R.discount))||void 0===t?void 0:t.toFixed(2)))),r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(v.a,{color:"primary",type:"submit"},"Submit")," "))))),r.a.createElement(N.a,null)))}}}]);
//# sourceMappingURL=474.945a3c81.chunk.js.map