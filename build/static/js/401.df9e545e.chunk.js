(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[401],{3092:function(e,t,a){"use strict";a.r(t);var l=a(8),n=a(26),c=a(25),r=a(1),o=a.n(r),i=a(910),u=a(902),s=a(903),m=a(244),d=a(914),v=a(904),b=a(905),p=a(906),E=(a(234),a(135)),f=a.n(E),g=(a(232),a(54)),O=a(84),y=[],j=[];t.default=function(e){var t=Object(r.useState)(""),a=Object(c.a)(t,2),E=(a[0],a[1]),N=Object(r.useState)(""),S=Object(c.a)(N,2),h=S[0],P=S[1],q=Object(r.useState)(""),D=Object(c.a)(q,2),_=D[0],C=D[1],I=Object(r.useState)(""),R=Object(c.a)(I,2),k=R[0],T=(R[1],Object(r.useState)([])),w=Object(c.a)(T,2),J=w[0],x=w[1],M=Object(r.useState)([]),Q=Object(c.a)(M,2),A=(Q[0],Q[1],Object(r.useState)("")),L=Object(c.a)(A,2),B=L[0],V=L[1],F=Object(r.useState)(0),G=Object(c.a)(F,2),H=(G[0],G[1]),z=Object(r.useState)(0),K=Object(c.a)(z,2),U=K[0],W=K[1],X=Object(r.useState)({}),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useState)([]),te=Object(c.a)(ee,2),ae=(te[0],te[1]),le=Object(r.useState)([]),ne=Object(c.a)(le,2),ce=ne[0],re=ne[1],oe=Object(r.useState)([{product:"",productId:"",availableQty:"",qty:1,price:"",totalprice:"",Salespersonname:"",targetstartDate:"",targetEndDate:""}]),ie=Object(c.a)(oe,2),ue=ie[0],se=ie[1],me=function(e,t){E(t);var a=e.target,l=a.name,c=a.value,r=Object(n.a)(ue);r[t][l]=c;var o=0;r.length>0&&(o=(null===r||void 0===r?void 0:r.map((function(e){return y[t]=e.qty*e.price,r[t].totalprice=e.qty*e.price,e.qty*e.price}))).reduce((function(e,t){return e+t})));se(r),W(o)},de=function(e,t,a){j.splice(a,1);var l=(null===ue||void 0===ue?void 0:ue.map((function(e,l){var n,c;console.log((null===e||void 0===e?void 0:e.qty)*(null===(n=t[l])||void 0===n?void 0:n.Product_MRP));var r=(null===e||void 0===e?void 0:e.qty)*(null===(c=j[l])||void 0===c?void 0:c.Product_MRP);return y[a]=r,r}))).reduce((function(e,t){return e+t}));W(l||0)},ve=function(e,t,a){j.push(t),se((function(e){var c=Object(n.a)(e),r=Object(l.a)({},c[a]);r.price=null===t||void 0===t?void 0:t.Product_MRP,r.productId=null===t||void 0===t?void 0:t._id,c[a]=r;var o=(null===e||void 0===e?void 0:e.map((function(e,t){var l,n=(null===e||void 0===e?void 0:e.qty)*(null===(l=j[t])||void 0===l?void 0:l.Product_MRP);return y[a]=n,n}))).reduce((function(e,t){return e+t}));return W(o),r.totalprice=o,c}));var c=Object(n.a)(ue).map((function(e){e.totalprice}));H(c)};Object(r.useEffect)((function(){JSON.parse(localStorage.getItem("userData"));var e=JSON.parse(localStorage.getItem("userData"));Object(g.i)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){re(null===e||void 0===e?void 0:e.adminDetails)})).catch((function(e){return console.log(e)})),Object(g.H)().then((function(e){ae(null===e||void 0===e?void 0:e.SalesPerson)})).catch((function(e){return console.log(e)}));var t=JSON.parse(localStorage.getItem("userData"));Object(g.Rb)(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.database).then((function(e){x(null===e||void 0===e?void 0:e.Product)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));$(e)}),[]);var be=function(){se([].concat(Object(n.a)(ue),[{product:"",productId:"",availableQty:"",qty:1,price:"",totalprice:"",Salespersonname:"",targetstartDate:"",targetEndDate:""}]))},pe=function(e){var t=Object(n.a)(ue);t.splice(e,1),y.splice(e,1);var a=y.reduce((function(e,t){return e+t}));W(a),se(t)};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement(u.a,{className:"m-2"},o.a.createElement(s.a,{className:""},o.a.createElement("div",null,o.a.createElement("h1",{className:""},"Create Target"))),o.a.createElement(s.a,null,o.a.createElement("div",{className:"float-right"},o.a.createElement(O.b,{render:function(e){var t=e.history;return o.a.createElement(m.a,{style:{cursor:"pointer"},className:"float-right mr-1",color:"primary",onClick:function(){return t.goBack()}},"Back")}})))),o.a.createElement(d.a,null,o.a.createElement(v.a,{className:"m-1",onSubmit:function(e){e.preventDefault();var t=null===ue||void 0===ue?void 0:ue.map((function(e,t){return{productId:null===e||void 0===e?void 0:e.productId,qtyAssign:Number(null===e||void 0===e?void 0:e.qty),price:null===e||void 0===e?void 0:e.price,totalPrice:null===e||void 0===e?void 0:e.totalprice}}));if(null===B||void 0===B?void 0:B._id){var a={startDate:h,endDate:_,grandTotal:U,salesPersonId:null===B||void 0===B?void 0:B._id,products:t,created_by:null===Z||void 0===Z?void 0:Z._id};k?swal("Error occured while Entering Details"):Object(g.L)(a).then((function(e){swal("Target Created Successfully")})).catch((function(e){console.log(e)}))}else swal("Error","Choose Sales Person First")}},o.a.createElement(u.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Choose Sales Person"),o.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:ce,onSelect:function(e,t){V(t)},onRemove:function(e,t,a){console.log(e),console.log(a)},displayValue:"firstName"}))),o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Start date"),o.a.createElement(p.a,{required:!0,type:"date",name:"targetEndDate",value:h,onChange:function(e){return P(e.target.value)}}))),o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"End Date"),o.a.createElement(p.a,{required:!0,type:"date",name:"targetstartDate",value:_,onChange:function(e){return C(e.target.value)}})))),ue&&(null===ue||void 0===ue?void 0:ue.map((function(e,t){return o.a.createElement(u.a,{className:"",key:t},o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Product Name"),o.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:J,onSelect:function(e,a){return ve(0,a,t)},onRemove:function(e,a){de(0,a,t)},displayValue:"Product_Title"}))),o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Quantity Assign"),o.a.createElement(p.a,{type:"number",name:"qty",min:0,autoComplete:"off",placeholder:"Req_Qty",value:null===e||void 0===e?void 0:e.qty,onChange:function(e){return me(e,t)}}))),o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Price"),o.a.createElement(p.a,{type:"number",name:"price",readOnly:!0,placeholder:"Price",value:e.price}))),o.a.createElement(s.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(b.a,null,"Total Price"),o.a.createElement(p.a,{type:"number",name:"totalprice",readOnly:!0,placeholder:"TtlPrice",value:e.price*(null===e||void 0===e?void 0:e.qty)}))),o.a.createElement(s.a,{className:"d-flex mt-1 abb",lg:"3",md:"3",sm:"12"},o.a.createElement("div",{className:"btnStyle"},t?o.a.createElement(m.a,{type:"button",color:"danger",className:"button remove ",onClick:function(){return pe(t)}},"- Remove"):null),o.a.createElement("div",{className:"btnStyle"},o.a.createElement(m.a,{className:"ml-1 mb-1",color:"primary",type:"button",onClick:function(){return be()}},"+ Add"))))}))),o.a.createElement(u.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},o.a.createElement("div",{className:" d-flex justify-content-end"},o.a.createElement(b.a,{className:"pr-5"},"Grand Total : ",o.a.createElement("strong",null,U))))),o.a.createElement(u.a,null,o.a.createElement(s.a,null,o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(m.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=401.df9e545e.chunk.js.map