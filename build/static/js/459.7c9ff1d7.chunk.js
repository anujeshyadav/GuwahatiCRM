(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[459],{3018:function(e,a,t){"use strict";t.r(a);var l=t(8),n=t(26),c=t(25),r=t(1),i=t.n(r),o=(t(233),t(910)),u=t(902),m=t(903),s=t(244),d=t(914),v=t(904),b=t(905),p=t(906),E=(t(234),t(135)),f=t.n(E),y=(t(232),t(54)),O=t(84),N=[],j=[],g=[];a.default=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),E=(t[0],t[1]),S=Object(r.useState)(""),h=Object(c.a)(S,2),q=(h[0],h[1],Object(r.useState)("")),P=Object(c.a)(q,2),Q=P[0],C=(P[1],Object(r.useState)([])),D=Object(c.a)(C,2),R=D[0],T=D[1],_=Object(r.useState)([]),I=Object(c.a)(_,2),x=I[0],z=I[1],k=Object(r.useState)([]),w=Object(c.a)(k,2),J=w[0],L=w[1],U=Object(r.useState)(""),A=Object(c.a)(U,2),G=A[0],V=A[1],B=Object(r.useState)(0),M=Object(c.a)(B,2),F=M[0],H=M[1],K=Object(r.useState)(0),W=Object(c.a)(K,2),X=(W[0],W[1],Object(r.useState)({})),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useState)(""),ae=Object(c.a)(ee,2),te=ae[0],le=ae[1],ne=Object(r.useState)([{product:"",productId:"",availableQty:"",qty:1,price:"",totalprice:"",unitQty:"",Size:"",unitType:""}]),ce=Object(c.a)(ne,2),re=ce[0],ie=ce[1],oe=Object(O.g)(),ue=function(e,a,t){if(!(t>=e.target.value))return null;E(a);var l=e.target,c=l.name,r=l.value,i=Object(n.a)(re);i[a][c]=r;var o=0;i.length>0&&(o=(null===i||void 0===i?void 0:i.map((function(e){return console.log(e.qty*e.price),i[a].totalprice=e.qty*e.price,e.qty*e.price}))).reduce((function(e,a){return e+a})),console.log("GrandTotal",o)),ie(i),H(o),console.log(N)},me=function(e,a,t){var l=e.target,c=l.name,r=l.value;if(Number(r)<=t&&Number(0!=r)){E(a);var i=Object(n.a)(re);i[a][c]=Number(r);var o=0;if(i.length>0)o=(null===i||void 0===i?void 0:i.map((function(e){return N[a]=e.Size*e.qty*e.price,i[a].totalprice=e.Size*e.qty*e.price,e.Size*e.qty*e.price}))).reduce((function(e,a){return e+a}));ie(i),H(o)}};Object(r.useEffect)((function(){}),[re,N]),Object(r.useEffect)((function(){JSON.parse(localStorage.getItem("userData"))._id;var e=JSON.parse(localStorage.getItem("userData"));Object(y.Rb)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){console.log(e.Product),T(null===e||void 0===e?void 0:e.Product)})).catch((function(e){console.log(e)})),Object(y.n)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){var a=null===e||void 0===e?void 0:e.Customer;(null===a||void 0===a?void 0:a.length)&&L(a)})).catch((function(e){console.log(e)})),Object(y.Bc)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){z(e.Unit)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));$(e)}),[]);var se=function(){ie([].concat(Object(n.a)(re),[{product:"",productId:"",availableQty:"",qty:1,price:"",totalprice:""}]))},de=function(e){var a=Object(n.a)(re);null===a||void 0===a||a.splice(e,1),N.splice(e,1);var t=null===N||void 0===N?void 0:N.reduce((function(e,a){return e+a}));H(t),ie(a)},ve=function(e,a,t){console.log(e)};return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(o.a,null,i.a.createElement(u.a,{className:"m-2"},i.a.createElement(m.a,{className:""},i.a.createElement("div",null,i.a.createElement("h1",{className:""},"Place Order"))),i.a.createElement(m.a,{className:""},i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(s.a,{className:"btn float-right",color:"warning",onClick:function(){return oe.push("/app/AjGroup/order/placeOrderList")}},"Back")))),i.a.createElement(d.a,null,i.a.createElement(v.a,{className:"m-1",onSubmit:function(e){e.preventDefault(),console.log("Final ",re);var a=Z.firstName+" "+(null===Z||void 0===Z?void 0:Z.lastName),t={userId:null===Z||void 0===Z?void 0:Z._id,fullName:a,address:null===Z||void 0===Z?void 0:Z.Address,grandTotal:F+.05*F+.18*F,MobileNo:null===Z||void 0===Z?void 0:Z.mobileNumber,country:null===Z||void 0===Z?void 0:Z.Country,state:null===Z||void 0===Z?void 0:Z.State,city:null===Z||void 0===Z?void 0:Z.City,orderItems:re,DateofDelivery:te,partyId:G};Q?swal("Error occured while Entering Details"):Object(y.ec)(t).then((function(e){swal("Order Place Successfully")})).catch((function(e){console.log(e)}))}},i.a.createElement(u.a,null,i.a.createElement(m.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Choose Party"),i.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:J,onSelect:function(e,a){return function(e,a,t){V(null===a||void 0===a?void 0:a._id)}(0,a)},onRemove:ve,displayValue:"OwnerName"}))),i.a.createElement(m.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Expected Delivery Date"),i.a.createElement(p.a,{required:!0,type:"date",name:"DateofDelivery",value:te,onChange:function(e){return le(e.target.value)}})))),re&&(null===re||void 0===re?void 0:re.map((function(e,a){return i.a.createElement(u.a,{className:"",key:a},i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"ProductName"),i.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:R,onSelect:function(e,t){return function(e,a,t){j.push(a),ie((function(e){var c=Object(n.a)(e),r=Object(l.a)({},c[t]);return r.price=a.Product_MRP,r.productId=a._id,r.availableQty=a.Size,c[t]=r,c}))}(0,t,a)},onRemove:function(e,a){ve(e)},displayValue:"Product_Title"}))),i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Available Size"),i.a.createElement(p.a,{type:"number",name:"availableQty",placeholder:"availableQty",value:null===e||void 0===e?void 0:e.availableQty,onChange:function(e){return ue(e,a)}}))),i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Required Qty"),i.a.createElement(p.a,{type:"number",name:"qty",placeholder:"Req_Qty",autocomplete:"off",value:null===e||void 0===e?void 0:e.qty,onChange:function(t){return me(t,a,null===e||void 0===e?void 0:e.availableQty)}}))),i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Choose Unit"),i.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:x,onSelect:function(e,t){return function(e,a,t){g.push(a),ie((function(e){var c=Object(n.a)(e),r=Object(l.a)({},c[t]);r.Size=a.unitQty,r.unitType=a.primaryUnit,c[t]=r;var i=(null===e||void 0===e?void 0:e.map((function(e,a){var l,n;c[t].totalprice=(null===e||void 0===e?void 0:e.qty)*e.price*(null===(l=g[a])||void 0===l?void 0:l.unitQty);var r=(null===e||void 0===e?void 0:e.price)*e.qty*(null===(n=g[a])||void 0===n?void 0:n.unitQty);return N[t]=r,r}))).reduce((function(e,a){return e+a}));return H(i),c}))}(0,t,a)},onRemove:function(e,a){ve(e)},displayValue:"primaryUnit"}))),i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Price"),i.a.createElement(p.a,{type:"number",name:"price",readOnly:!0,placeholder:"Price",value:e.price}))),i.a.createElement(m.a,{className:"mb-1"},i.a.createElement("div",{className:""},i.a.createElement(b.a,null,"Total Price"),i.a.createElement(p.a,{type:"number",name:"totalprice",readOnly:!0,placeholder:"TtlPrice",value:e.Size*e.price*e.qty}))),i.a.createElement(m.a,{className:"d-flex mt-1 abb"},i.a.createElement("div",{className:"btnStyle"},a?i.a.createElement(s.a,{type:"button",color:"danger",className:"button remove ",onClick:function(){return de(a)}},"-"):null),i.a.createElement("div",{className:"btnStyle"},i.a.createElement(s.a,{className:"ml-1 mb-1",color:"primary",type:"button",onClick:function(){return se()}},"+"))))}))),i.a.createElement(u.a,null,i.a.createElement(m.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},i.a.createElement("div",{className:" d-flex justify-content-end"},i.a.createElement("ul",{className:"subtotal"},i.a.createElement("li",null,i.a.createElement(b.a,{className:""},"SubTotal : ",i.a.createElement("strong",null,F))),i.a.createElement("li",null,i.a.createElement(b.a,{className:""},"Shipping Cost :"," ",i.a.createElement("strong",null,"RS ",.05*F))),i.a.createElement("li",null,i.a.createElement(b.a,{className:""},"Tax: ",i.a.createElement("strong",null,"RS ",.18*F))),i.a.createElement("li",null," ",i.a.createElement(b.a,{className:"pr-5"},"Grand Total :"," ",i.a.createElement("strong",null,F+.05*F+.18*F))))))),i.a.createElement(u.a,null,i.a.createElement(m.a,null,i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement(s.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=459.7c9ff1d7.chunk.js.map