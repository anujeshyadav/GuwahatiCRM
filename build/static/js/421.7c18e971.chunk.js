(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[421],{2986:function(e,a,t){"use strict";t.r(a);var l=t(8),n=t(25),c=t(24),r=t(1),o=t.n(r),i=(t(226),t(80)),u=(t(26),t(901)),m=t(893),s=t(894),d=t(238),v=t(905),b=t(895),E=t(896),p=t(897),f=t(883),y=(t(227),t(164)),N=t.n(y),O=(t(225),t(56)),g=[],j=[];a.default=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),y=(t[0],t[1]),S=Object(r.useState)(""),h=Object(c.a)(S,2),q=(h[0],h[1],Object(r.useState)("")),P=Object(c.a)(q,2),C=P[0],D=(P[1],Object(r.useState)([])),Q=Object(c.a)(D,2),R=Q[0],T=Q[1],I=Object(r.useState)([]),_=Object(c.a)(I,2),k=_[0],x=_[1],z=Object(r.useState)(""),w=Object(c.a)(z,2),A=w[0],J=w[1],U=Object(r.useState)([]),L=Object(c.a)(U,2),M=L[0],G=L[1],V=Object(r.useState)(0),B=Object(c.a)(V,2),F=(B[0],B[1]),H=Object(r.useState)({}),K=Object(c.a)(H,2),W=K[0],X=K[1],Y=Object(r.useState)(""),Z=Object(c.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(r.useState)([{productId:"",availableQty:"",qty:1,price:"",totalprice:"",unitQty:""}]),te=Object(c.a)(ae,2),le=te[0],ne=te[1],ce=function(e,a,t){if(!(t>=e.target.value))return null;y(a);var l=e.target,c=l.name,r=l.value,o=Object(n.a)(le);if(o[a][c]=r,o.length>0)null===o||void 0===o||o.map((function(e){return o[a].totalprice=e.qty*e.price,e.qty*e.price}))},re=function(e,a){var t=Object(n.a)(le);t[a].unitQty=e.target.value,console.log(t),ne(t)},oe=null===le||void 0===le?void 0:le.reduce((function(e,a){return e+a.price}),0),ie=.1*oe,ue=.2*oe,me=oe+ie;Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"))._id;Object(O.Ib)(e).then((function(e){console.log(null===e||void 0===e?void 0:e.Product),T(null===e||void 0===e?void 0:e.Product)})).catch((function(e){console.log(e)})),Object(O.t)(e).then((function(e){x(e.Party)})).catch((function(e){console.log(e)})),Object(O.pc)(e).then((function(e){G(e.Unit)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));X(e)}),[]);var se=function(){ne([].concat(Object(n.a)(le),[{productId:"",availableQty:"",qty:1,price:"",totalprice:"",unitQty:""}]))},de=function(e){var a=Object(n.a)(le);a.splice(e,1),g.splice(e,1);var t=g.reduce((function(e,a){return e+a}),0);setGrandTotalAmt(t),ne(a)},ve=function(e,a,t){console.log(e),console.log(t)};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(u.a,null,o.a.createElement(m.a,{className:"m-2"},o.a.createElement(s.a,{className:""},o.a.createElement("div",null,o.a.createElement("h1",{className:""},"Create Order"))),o.a.createElement(s.a,null,o.a.createElement(i.b,{render:function(e){var a=e.history;return o.a.createElement(d.a,{className:"btn float-right",color:"danger",size:"sm",onClick:function(){return a.push("/app/softnumen/order/orderList")}},"Back")}}))),o.a.createElement(v.a,null,o.a.createElement(b.a,{className:"m-1",onSubmit:function(e){e.preventDefault();var a=(null===W||void 0===W?void 0:W.firstName)+" "+(null===W||void 0===W?void 0:W.lastName),t={userId:null===W||void 0===W?void 0:W._id,fullName:a,address:null===W||void 0===W?void 0:W.currentAddress,grandTotal:me,MobileNo:null===W||void 0===W?void 0:W.mobileNumber,country:null===W||void 0===W?void 0:W.Country,state:null===W||void 0===W?void 0:W.State,city:null===W||void 0===W?void 0:W.City,orderItems:le,DateofDelivery:$,partyId:A};console.log(t),C?swal("Error occured while Entering Details"):Object(O.Tb)(t).then((function(e){swal("Order Created Successfully")})).catch((function(e){console.log(e)}))}},o.a.createElement(m.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Choose Party"),o.a.createElement(N.a,{required:!0,selectionLimit:1,isObject:"false",options:k,onSelect:function(e,a){return function(e,a,t){J(a._id)}(0,a)},onRemove:ve,displayValue:"firstName"}))),o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Expected Delivery Date"),o.a.createElement(p.a,{required:!0,type:"date",name:"DateofDelivery",value:$,onChange:function(e){return ee(e.target.value)}}))),o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"})),le&&(null===le||void 0===le?void 0:le.map((function(e,a){return o.a.createElement(m.a,{className:"",key:a},o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"ProductName"),o.a.createElement(N.a,{required:!0,selectionLimit:1,isObject:"false",options:R,onSelect:function(e,t){return function(e,a,t){j.push(a),ne((function(e){var c=Object(n.a)(e),r=Object(l.a)({},c[t]);r.price=a.Product_MRP,r.productId=a._id,r.availableQty=a.Size,c[t]=r;var o=(null===e||void 0===e?void 0:e.map((function(e,a){var l,n=(null===e||void 0===e?void 0:e.qty)*(null===(l=j[a])||void 0===l?void 0:l.Product_MRP);return g[t]=n,n}))).reduce((function(e,a){return e+a}),0);return console.log(o),F(o),c}))}(0,t,a)},onRemove:function(e,t){ve(e,0,a)},displayValue:"Product_Title"}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Available Size"),o.a.createElement(p.a,{type:"number",disabled:!0,name:"availableQty",placeholder:"AvailableSize",value:null===e||void 0===e?void 0:e.availableQty}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Required Size"),o.a.createElement(p.a,{type:"number",name:"qty",placeholder:"Req_Qty",required:!0,autocomplete:"off",value:null===e||void 0===e?void 0:e.qty,onChange:function(t){return ce(t,a,null===e||void 0===e?void 0:e.availableQty)}}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement(E.a,null,"Choose Unit"),o.a.createElement(f.a,{type:"select",placeholder:"Select Type",name:"type",value:e.unitQty,onChange:function(e){return re(e,a)}},o.a.createElement("option",{value:"None"},"None"),null===M||void 0===M?void 0:M.map((function(e){return o.a.createElement("option",{value:e.primaryUnit},e.primaryUnit)})))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Price"),o.a.createElement(p.a,{type:"number",name:"price",disabled:!0,placeholder:"Price",value:e.price}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(E.a,null,"Total Price"),o.a.createElement(p.a,{type:"number",name:"totalprice",disabled:!0,placeholder:"TtlPrice",value:e.price*(null===e||void 0===e?void 0:e.qty)}))),o.a.createElement(s.a,{className:"d-flex mt-1 abb"},o.a.createElement("div",{className:"btnStyle"},a?o.a.createElement(d.a,{type:"button",color:"danger",className:"button remove ",size:"sm",onClick:function(){return de(a)}},"-"):null),o.a.createElement("div",{className:"btnStyle"},o.a.createElement(d.a,{className:"ml-1 mb-1",color:"primary",type:"button",size:"sm",onClick:function(){return se()}},"+"))))}))),o.a.createElement(m.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},o.a.createElement("div",{className:" d-flex justify-content-end"},o.a.createElement("ul",{className:"subtotal"},o.a.createElement("li",null,o.a.createElement(E.a,{className:""},"SubTotal:",o.a.createElement("strong",null,oe&&(null===oe||void 0===oe?void 0:oe.length)>=0?oe:0))),o.a.createElement("li",null,o.a.createElement(E.a,{className:""},"Shipping Cost : ",o.a.createElement("strong",null,"RS ",oe))),o.a.createElement("li",null,o.a.createElement(E.a,{className:""},"Tax: ",o.a.createElement("strong",null,"RS ",ie))),o.a.createElement("li",null,o.a.createElement(E.a,{className:""},"Discount : ",o.a.createElement("strong",null,"RS ",ue))),o.a.createElement("li",null,o.a.createElement(E.a,{className:"pr-5"},"Grand Total :",o.a.createElement("strong",null,me))))))),o.a.createElement(m.a,null,o.a.createElement(s.a,null,o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(d.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=421.7c18e971.chunk.js.map