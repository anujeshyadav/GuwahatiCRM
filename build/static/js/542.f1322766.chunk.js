/*! For license information please see 542.f1322766.chunk.js.LICENSE.txt */
(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[542],{3138:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(4),o=a(24),l=a(25),i=a(1),c=a.n(i),u=(a(233),a(85)),d=(a(27),a(913)),s=a(905),v=a(906),m=a(244),f=a(917),p=a(907),h=a(908),y=a(909),b=(a(234),a(135)),g=a.n(b),E=(a(232),a(43)),T=a(5),x=a(56),O=a(619);function N(){N=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,a){return e[t]=a}}function u(e,t,a,r){var o=t&&t.prototype instanceof v?t:v,l=Object.create(o.prototype),i=new S(r||[]);return n(l,"_invoke",{value:T(e,a,i)}),l}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function v(){}function m(){}function f(){}var p={};c(p,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(w([])));y&&y!==t&&a.call(y,o)&&(p=y);var b=f.prototype=v.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function l(){return new t((function(r,l){!function n(r,o,l,i){var c=d(e[r],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&a.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(c.arg)}(n,o,r,l)}))}return r=r?r.then(l,l):l()}})}function T(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return L()}for(a.method=r,a.arg=o;;){var l=a.delegate;if(l){var i=x(l,a);if(i){if(i===s)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=d(e,t,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function x(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),s;var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function w(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=f,n(b,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:m,configurable:!0}),m.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(E.prototype),c(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var l=new E(u(t,a,n,r),o);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=w,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;j(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:w(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),s}},e}var j=[],S=[],w=[];t.default=function(e){var t,a,b,L,C,_,P,I,k,D,q,G,z,Q,R,A,F=Object(i.useState)(""),J=Object(l.a)(F,2),U=(J[0],J[1]),V=Object(i.useState)(!1),M=Object(l.a)(V,2),Y=M[0],B=M[1],W=Object(i.useState)([]),H=Object(l.a)(W,2),K=H[0],X=H[1],Z=Object(i.useState)({}),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ae=Object(i.useState)([]),ne=Object(l.a)(ae,2),re=ne[0],oe=ne[1],le=Object(i.useState)(""),ie=Object(l.a)(le,2),ce=ie[0],ue=ie[1],de=Object(i.useState)({}),se=Object(l.a)(de,2),ve=se[0],me=se[1],fe=Object(i.useState)([]),pe=Object(l.a)(fe,2),he=pe[0],ye=pe[1],be=Object(i.useState)({}),ge=Object(l.a)(be,2),Ee=ge[0],Te=ge[1],xe=Object(i.useState)(""),Oe=Object(l.a)(xe,2),Ne=Oe[0],je=Oe[1],Se=Object(i.useState)([{productId:"",productData:"",disCountPercentage:"",availableQty:"",qty:1,price:"",Size:"",unitType:"",totalprice:""}]),we=Object(l.a)(Se,2),Le=we[0],Ce=we[1],_e=Object(i.useContext)(x.a),Pe=function(e,t,a){var n=e.target,r=n.name,l=n.value;if(Number(l)<=a&&Number(0!=l)){U(t);var i=Object(o.a)(Le);i[t][r]=Number(l);if(i.length>0)(null===i||void 0===i?void 0:i.map((function(e){return j[t]=e.Size*e.qty*e.price,i[t].totalprice=e.Size*e.qty*e.price,e.Size*e.qty*e.price}))).reduce((function(e,t){return e+t}));var c=Object(O.a)(ve,i,_e);te(c),Ce(i)}},Ie=function(){var e=Object(r.a)(N().mark((function e(t,a,r){var l,i,c,u;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JSON.parse(localStorage.getItem("userData")),S.push(a),Object(E.hd)(T.Ae,null===a||void 0===a||null===(l=a.warehouse)||void 0===l?void 0:l._id).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),c="".concat(T.Fe).concat(null===a||void 0===a||null===(i=a.warehouse)||void 0===i?void 0:i._id,"/"),e.next=6,Object(E.hd)(c,null===a||void 0===a?void 0:a._id).then((function(e){console.log(null===e||void 0===e?void 0:e.currentStock),u=null===e||void 0===e?void 0:e.currentStock})).catch((function(e){console.log(e),swal("something went Wrong")}));case 6:Ce((function(e){var t,l,i,c,d=Object(o.a)(e),s=Object(n.a)({},d[r]);s.price=a.Product_MRP,s.productId=a._id,s.productData=a,s.disCountPercentage=(null===ve||void 0===ve||null===(t=ve.Category)||void 0===t?void 0:t.discount)&&(null===ve||void 0===ve||null===(l=ve.Category)||void 0===l?void 0:l.discount)?null===ve||void 0===ve||null===(i=ve.Category)||void 0===i?void 0:i.discount:0,s.availableQty=null===(c=u)||void 0===c?void 0:c.currentStock,d[r]=s;var v=Object(O.a)(ve,d,_e);return te(v),d}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,t=JSON.parse(localStorage.getItem("userData"));"Customer"==(null===t||void 0===t||null===(e=t.rolename)||void 0===e?void 0:e.roleName)&&(B(!0),ue(null===t||void 0===t?void 0:t._id)),Object(E.Qb)(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.database).then((function(e){var t,a=null===e||void 0===e||null===(t=e.Product)||void 0===t?void 0:t.filter((function(e){return"Product"==(null===e||void 0===e?void 0:e.addProductType)}));X(a)})).catch((function(e){console.log(e)})),Object(E.l)(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.database).then((function(e){var t=null===e||void 0===e?void 0:e.Customer;(null===t||void 0===t?void 0:t.length)&&oe(t)})).catch((function(e){console.log(e)})),Object(E.Dc)(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.database).then((function(e){ye(e.Unit)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));Te(e)}),[]);var ke=function(){Ce([].concat(Object(o.a)(Le),[{productId:"",productData:"",disCountPercentage:"",availableQty:"",qty:1,price:"",totalprice:"",unitQty:"",unitType:""}]))},De=function(e){var t=Object(o.a)(Le);t.splice(e,1),j.splice(e,1);j.reduce((function(e,t){return e+t}),0);Ce(t);var a=Object(O.a)(ve,t,_e);te(a)},qe=function(e,t,a){console.log(e)};return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(d.a,null,c.a.createElement(s.a,{className:"m-2"},c.a.createElement(v.a,{className:""},c.a.createElement("div",null,c.a.createElement("h1",{className:""},"Create Sales Order"))),c.a.createElement(v.a,null,c.a.createElement(u.b,{render:function(e){var t=e.history;return c.a.createElement(m.a,{className:"btn float-right",color:"danger",size:"sm",onClick:function(){return t.push("/app/softnumen/order/orderList")}},"Back")}}))),c.a.createElement(f.a,null,c.a.createElement(p.a,{className:"m-1",onSubmit:function(e){var t,a,n,r,o,l,i,c,u,d=Object(O.a)(ve,Le,_e);e.preventDefault();var s=(null===Ee||void 0===Ee?void 0:Ee.firstName)+" "+(null===Ee||void 0===Ee?void 0:Ee.lastName),v={userId:null===Ee||void 0===Ee?void 0:Ee._id,database:null===Ee||void 0===Ee?void 0:Ee.database,partyId:ce,SuperAdmin:null===_e||void 0===_e||null===(t=_e.CompanyDetails)||void 0===t?void 0:t.created_by,fullName:s,address:null===Ee||void 0===Ee?void 0:Ee.address,grandTotal:null===d||void 0===d||null===(a=d.Tax)||void 0===a?void 0:a.GrandTotal,roundOff:Number(((null===d||void 0===d||null===(n=d.Tax)||void 0===n?void 0:n.GrandTotal)-(null===d||void 0===d||null===(r=d.Tax)||void 0===r?void 0:r.RoundOff)).toFixed(2)),amount:null===d||void 0===d||null===(o=d.Tax)||void 0===o?void 0:o.Amount,sgstTotal:null===d||void 0===d||null===(l=d.Tax)||void 0===l?void 0:l.CgstTotal,igstTaxType:null===d||void 0===d||null===(i=d.Tax)||void 0===i?void 0:i.IgstTaxType,cgstTotal:null===d||void 0===d||null===(c=d.Tax)||void 0===c?void 0:c.CgstTotal,igstTotal:null===d||void 0===d||null===(u=d.Tax)||void 0===u?void 0:u.IgstTotal,gstDetails:null===d||void 0===d?void 0:d.gstDetails,MobileNo:null===Ee||void 0===Ee?void 0:Ee.mobileNumber,country:null===Ee||void 0===Ee?void 0:Ee.Country,state:null===Ee||void 0===Ee?void 0:Ee.State,city:null===Ee||void 0===Ee?void 0:Ee.City,orderItems:Le,DateofDelivery:Ne};Object(E.ec)(v).then((function(e){console.log(e),swal("Order Created Successfully")})).catch((function(e){console.log(e)}))}},c.a.createElement(s.a,null,Y&&Y?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Choose Party"),c.a.createElement(g.a,{required:!0,selectionLimit:1,isObject:"false",options:re,onSelect:function(e,t){return function(e,t){ue(t._id),me(t)}(0,t)},onRemove:qe,displayValue:"firstName"}))),c.a.createElement(v.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Expected Delivery Date"),c.a.createElement(y.a,{required:!0,type:"date",name:"DateofDelivery",value:Ne,onChange:function(e){return je(e.target.value)}})))),c.a.createElement(v.a,{className:"mb-1",lg:"4",md:"4",sm:"12"})),Le&&(null===Le||void 0===Le?void 0:Le.map((function(e,t){return c.a.createElement(s.a,{className:"",key:t},c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"ProductName"),c.a.createElement(g.a,{required:!0,selectionLimit:1,isObject:"false",options:K,onSelect:function(e,a){return Ie(e,a,t)},onRemove:function(e,t){qe(e)},displayValue:"Product_Title"}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Available Size"),c.a.createElement(y.a,{type:"number",disabled:!0,name:"availableQty",placeholder:"AvailableSize",value:null===e||void 0===e?void 0:e.availableQty}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Choose Unit"),c.a.createElement(g.a,{required:!0,selectionLimit:1,isObject:"false",options:he,onSelect:function(e,a){return function(e,t,a){w.push(t),Ce((function(e){var r=Object(o.a)(e),l=Object(n.a)({},r[a]);l.Size=t.unitQty,l.unitType=t.primaryUnit,r[a]=l;(null===e||void 0===e?void 0:e.map((function(e,t){var n,o;r[a].totalprice=(null===e||void 0===e?void 0:e.qty)*e.price*(null===(n=w[t])||void 0===n?void 0:n.unitQty);var l=(null===e||void 0===e?void 0:e.price)*e.qty*(null===(o=w[t])||void 0===o?void 0:o.unitQty);return j[a]=l,l}))).reduce((function(e,t){return e+t}));var i=Object(O.a)(ve,r,_e);return te(i),r}))}(0,a,t)},onRemove:function(e,t){qe(e)},displayValue:"primaryUnit"}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Required Size"),c.a.createElement(y.a,{type:"number",name:"qty",min:0,placeholder:"Req_Qty",required:!0,autocomplete:"off",value:null===e||void 0===e?void 0:e.qty,onChange:function(a){return Pe(a,t,null===e||void 0===e?void 0:e.availableQty)}}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Dis(%)"),c.a.createElement(y.a,{type:"text",name:"disCountPercentage",disabled:!0,placeholder:"Discount Percentage",value:null===e||void 0===e?void 0:e.disCountPercentage}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Price"),c.a.createElement(y.a,{type:"number",name:"price",disabled:!0,placeholder:"Price",value:e.price}))),c.a.createElement(v.a,{className:"mb-1"},c.a.createElement("div",{className:""},c.a.createElement(h.a,null,"Total Price"),c.a.createElement(y.a,{type:"number",name:"totalprice",disabled:!0,placeholder:"TtlPrice",value:e.Size*e.price*e.qty}))),c.a.createElement(v.a,{className:"d-flex mt-1 abb"},c.a.createElement("div",{className:"btnStyle"},t?c.a.createElement(m.a,{type:"button",color:"danger",className:"button remove ",size:"sm",onClick:function(){return De(t)}},"-"):null),c.a.createElement("div",{className:"btnStyle"},c.a.createElement(m.a,{className:"ml-1 mb-1",color:"primary",type:"button",size:"sm",onClick:function(){return ke()}},"+"))))}))),c.a.createElement(s.a,null,c.a.createElement(v.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},c.a.createElement("div",{className:" d-flex justify-content-end"},c.a.createElement("ul",{className:"subtotal"},c.a.createElement("li",null,c.a.createElement(h.a,{className:"pr-5"},"Total:",c.a.createElement("span",{className:"p-2"},(null===ee||void 0===ee||null===(t=ee.Tax)||void 0===t?void 0:t.Amount)&&(null===ee||void 0===ee||null===(a=ee.Tax)||void 0===a?void 0:a.Amount)?null===ee||void 0===ee||null===(b=ee.Tax)||void 0===b?void 0:b.Amount:0))),(null===ee||void 0===ee||null===(L=ee.Tax)||void 0===L?void 0:L.IgstTaxType)&&(null===ee||void 0===ee||null===(C=ee.Tax)||void 0===C?void 0:C.IgstTaxType)?c.a.createElement("li",null,c.a.createElement(h.a,{className:""},"IGST Tax:"," ",c.a.createElement("strong",null,"RS"," ",(null===ee||void 0===ee||null===(_=ee.Tax)||void 0===_?void 0:_.IgstTotal)&&(null===ee||void 0===ee||null===(P=ee.Tax)||void 0===P?void 0:P.IgstTotal)?null===ee||void 0===ee||null===(I=ee.Tax)||void 0===I?void 0:I.IgstTotal:0))):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(h.a,{className:""},"SGST Tax:"," ",c.a.createElement("strong",null,"RS"," ",(null===ee||void 0===ee||null===(k=ee.Tax)||void 0===k?void 0:k.SgstTotal)&&(null===ee||void 0===ee||null===(D=ee.Tax)||void 0===D?void 0:D.SgstTotal)?null===ee||void 0===ee||null===(q=ee.Tax)||void 0===q?void 0:q.SgstTotal:0))),c.a.createElement("li",null,c.a.createElement(h.a,{className:""},"CGST Tax:"," ",c.a.createElement("strong",null,"RS"," ",(null===ee||void 0===ee||null===(G=ee.Tax)||void 0===G?void 0:G.CgstTotal)&&(null===ee||void 0===ee||null===(z=ee.Tax)||void 0===z?void 0:z.CgstTotal)?null===ee||void 0===ee||null===(Q=ee.Tax)||void 0===Q?void 0:Q.CgstTotal:0)))),c.a.createElement("li",null," ",c.a.createElement(h.a,{className:"pr-5"},"Grand Total :"," ",c.a.createElement("strong",null,"RS"," ",(null===ee||void 0===ee||null===(R=ee.Tax)||void 0===R?void 0:R.GrandTotal)?null===ee||void 0===ee||null===(A=ee.Tax)||void 0===A?void 0:A.GrandTotal:0))))))),c.a.createElement(s.a,null,c.a.createElement(v.a,null,c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(m.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=542.f1322766.chunk.js.map